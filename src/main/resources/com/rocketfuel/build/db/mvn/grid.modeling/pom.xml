<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>com.rocketfuel</groupId>
    <artifactId>vostok-maven</artifactId>
    <version>M1</version>
    <relativePath>../..</relativePath>
  </parent>

  <groupId>com.rocketfuel.grid.modeling</groupId>
  <artifactId>grid.modeling</artifactId>
  <version>M1</version>
  <packaging>jar</packaging>
  <name>grid.modeling</name>
  <scm>
    <developerConnection>${grid.scm.location}/${project.scm.path}</developerConnection>
  </scm>
  <properties>
    <grid.scm.location>scm:git:ssh://git.rfiserve.net:29418/grid</grid.scm.location>
    <project.scm.path>modeling</project.scm.path>
    <jdkName>JDK 1.7</jdkName>
    <compileSource>1.7</compileSource>

    <grid.profileupdater.version>[101.41.0,101.42.0)</grid.profileupdater.version>
    <grid.thirdparty.hbase.version>[1.1.4.255,1.1.5)</grid.thirdparty.hbase.version>
    <grid.thirdparty.hive.version>[0.13.1.0, 0.14.0.0)</grid.thirdparty.hive.version>
    <hadoop.version>2.6.4.1</hadoop.version>
    <mockito.version>1.8.5</mockito.version>
    <oozie.client.version>4.0.0.2.1.5.0-695</oozie.client.version>
    <sizeof.version>1.6</sizeof.version>
    <argLine>-Xmx1024m</argLine>

  </properties>
  <dependencies>
    <dependency>
      <groupId>com.rocketfuel.modeling</groupId>
      <artifactId>modeling.common.UserProfileMode</artifactId>
      <version>M1</version>
    </dependency>
    <dependency>
      <groupId>com.rocketfuel.server</groupId>
      <artifactId>server.util.IOUtils</artifactId>
      <version>M1</version>
    </dependency>
    <dependency>
      <groupId>org.apache.hadoop</groupId>
      <artifactId>hadoop-client</artifactId>
      <version>${hadoop.version}</version>
      <exclusions>
        <!-- There is version conflict between hsqldb pulled via hadoop AND
             the one pulled by server.db. Since the groupid is different for
             these jars both get placed in the classpath and wrong one wins.
             That's why excluding here explicitly.-->
        <exclusion>
          <artifactId>hsqldb</artifactId>
          <groupId>hsqldb</groupId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>com.rocketfuel.grid</groupId>
      <artifactId>grid.onlinestore.OnlineStore</artifactId>
      <version>M1</version>
    </dependency>
    <dependency>
      <groupId>de.bwaldvogel</groupId>
      <artifactId>liblinear</artifactId>
      <version>1.95</version>
    </dependency>
    <dependency>
      <groupId>com.rocketfuel.grid</groupId>
      <artifactId>grid.common.GridCommon</artifactId>
      <version>M1</version>
    </dependency>
    <dependency>
      <groupId>com.rocketfuel.mobile</groupId>
      <artifactId>mobile.common.MobileCommon</artifactId>
      <version>M1</version>
    </dependency>
    <dependency>
      <groupId>com.rocketfuel.modeling</groupId>
      <artifactId>modeling.common.ModelingCommon</artifactId>
      <version>M1</version>
    </dependency>
    <dependency>
      <groupId>org.ostermiller</groupId>
      <artifactId>utils</artifactId>
      <version>1.07.00</version>
    </dependency>
    <dependency>
      <groupId>commons-configuration</groupId>
      <artifactId>commons-configuration</artifactId>
      <version>1.5</version>
    </dependency>
    <dependency>
      <groupId>org.supercsv</groupId>
      <artifactId>supercsv</artifactId>
      <version>1.52</version>
    </dependency>
    <dependency>
      <groupId>commons-io</groupId>
      <artifactId>commons-io</artifactId>
      <version>2.4</version>
    </dependency>
    <dependency>
      <groupId>freemarker</groupId>
      <artifactId>freemarker</artifactId>
      <version>2.3.13</version>
    </dependency>
    <dependency>
      <groupId>com.rocketfuel.grid.thirdparty.hive</groupId>
      <artifactId>hive-exec</artifactId>
      <version>${grid.thirdparty.hive.version}</version>
    </dependency>
    <dependency>
      <groupId>org.testng</groupId>
      <artifactId>testng</artifactId>
      <version>6.8.17</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.oozie</groupId>
      <artifactId>oozie-client</artifactId>
      <version>${oozie.client.version}</version>
      <exclusions>
        <exclusion>
          <groupId>org.apache.hadoop</groupId>
          <artifactId>hadoop-auth</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>com.javabi.ehcache</groupId>
      <artifactId>sizeof</artifactId>
      <version>${sizeof.version}</version>
    </dependency>
    <dependency>
      <groupId>gnu.trove</groupId>
      <artifactId>trove</artifactId>
      <version>[3.0.3]</version>
    </dependency>
    <dependency>
      <groupId>com.google.guava</groupId>
      <artifactId>guava</artifactId>
      <version>12.0</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>com.hadoop.compresssion</groupId>
      <artifactId>hadoop-gpl-compression</artifactId>
      <version>0.2.0</version>
      <classifier>dev</classifier>
    </dependency>
    <dependency>
      <groupId>com.twitter.elephantbird</groupId>
      <artifactId>elephant-bird-core</artifactId>
      <version>4.1</version>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-simple</artifactId>
      <version>1.6.1</version>
    </dependency>
    <dependency>
      <groupId>com.rocketfuel.grid.thirdparty.hbase</groupId>
      <artifactId>hbase-client</artifactId>
      <version>${grid.thirdparty.hbase.version}</version>
    </dependency>
    <dependency>
      <groupId>com.rocketfuel.grid.thirdparty.hbase</groupId>
      <artifactId>hbase-server</artifactId>
      <version>${grid.thirdparty.hbase.version}</version>
      <exclusions>
        <exclusion>
          <groupId>org.apache.hadoop</groupId>
          <artifactId>hadoop-hdfs</artifactId>
        </exclusion>
        <exclusion>
          <groupId>com.rocketfuel.grid.thirdparty.hbase</groupId>
          <artifactId>hbase-common</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>com.rocketfuel.grid.thirdparty.hbase</groupId>
      <artifactId>hbase-common</artifactId>
      <version>${grid.thirdparty.hbase.version}</version>
    </dependency>
    <dependency>
      <groupId>com.yammer.metrics</groupId>
      <artifactId>metrics-core</artifactId>
      <version>2.1.2</version>
    </dependency>
    <dependency>
      <groupId>org.apache.commons</groupId>
      <artifactId>commons-lang3</artifactId>
      <version>3.2.1</version>
    </dependency>
    <dependency>
      <groupId>commons-dbutils</groupId>
      <artifactId>commons-dbutils</artifactId>
      <version>1.5</version>
    </dependency>
    <dependency>
      <groupId>com.rocketfuel.grid.profileupdater</groupId>
      <artifactId>grid.profileupdater</artifactId>
      <version>${grid.profileupdater.version}</version>
      <classifier>jar-with-dependencies</classifier>
      <scope>runtime</scope>
      <exclusions>
        <!-- This jar includes all dependencies it needs and it should
        be used only at runtime for hive, not for compilation. -->
        <exclusion>
          <artifactId>server.util</artifactId>
          <groupId>com.rocketfuel.server.util</groupId>
        </exclusion>
        <exclusion>
          <groupId>com.rocketfuel.grid.common</groupId>
          <artifactId>grid.common</artifactId>
        </exclusion>
        <exclusion>
          <groupId>com.rocketfuel.grid.onlinestore</groupId>
          <artifactId>grid.onlinestore</artifactId>
        </exclusion>
        <exclusion>
          <groupId>com.rocketfuel.modeling.common</groupId>
          <artifactId>modeling.common</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>org.mockito</groupId>
      <artifactId>mockito-all</artifactId>
      <version>${mockito.version}</version>
      <scope>test</scope>
      <optional>true</optional>
    </dependency>
    <dependency>
      <groupId>xml-apis</groupId>
      <artifactId>xml-apis</artifactId>
      <version>[1.4.01, 1.5.0)</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>com.rocketfuel.common</groupId>
      <artifactId>common.message.CommonMessage</artifactId>
      <version>M1</version>
    </dependency>
    <dependency>
      <groupId>com.restfb</groupId>
      <artifactId>restfb</artifactId>
      <version>[1.6.12,1.7.0)</version>
    </dependency>
    <dependency>
      <groupId>com.beust</groupId>
      <artifactId>jcommander</artifactId>
      <version>1.30</version>
    </dependency>
    <dependency>
      <groupId>com.jcraft</groupId>
      <artifactId>jsch</artifactId>
      <version>0.1.48</version>
    </dependency>
    <dependency>
      <groupId>org.scala-lang</groupId>
      <artifactId>scala-library</artifactId>
      <version>2.10.6</version>
    </dependency>
    <dependency>
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-java</artifactId>
      <version>5.1.9</version>
    </dependency>
  </dependencies>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>

        <configuration>
          <redirectTestOutputToFile>true</redirectTestOutputToFile>
          <suiteXmlFiles>
            <suiteXmlFile>src/test/resources/testng.xml</suiteXmlFile>
          </suiteXmlFiles>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>3.0.2</version>
        <configuration>
          <excludes>
            <exclude>**/*_conf.xml</exclude>
          </excludes>
        </configuration>
      </plugin>
      <plugin>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>3.0.0</version>
        <executions>
          <execution>
            <id>make-assembly</id>
            <!-- this is used for inheritance merges -->
            <phase>package</phase>
            <!-- append to the packaging phase. -->
            <goals>
              <goal>single</goal>
              <!-- goals == mojos -->
            </goals>
          </execution>
        </executions>
        <configuration>
          <descriptors>
            <descriptor>src/main/assemblies/bundle.xml</descriptor>
          </descriptors>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-checkstyle-plugin</artifactId>
        <version>2.9.1</version>
        <executions>
          <execution>
            <id>run-checkstyle</id>
            <!-- this is used for inheritance merges -->
            <phase>compile</phase>
            <!-- append to the packaging phase. -->
            <goals>
              <goal>checkstyle</goal>
              <!-- goals == mojos -->
            </goals>
          </execution>
        </executions>
        <configuration>
          <configLocation>checkstyle.xml</configLocation>
          <failsOnError>true</failsOnError>
          <consoleOutput>true</consoleOutput>
          <includeTestSourceDirectory>true</includeTestSourceDirectory>
          <linkXRef>true</linkXRef>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-source-plugin</artifactId>
        <version>3.0.1</version>
        <executions>
          <execution>
            <id>attach-sources</id>
            <phase>verify</phase>
            <goals>
              <goal>jar-no-fork</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.6.1</version>
        <configuration>
          <source>${compileSource}</source>
          <target>${compileSource}</target>
        </configuration>
      </plugin>
    </plugins>
  </build>
  <distributionManagement>
    <repository>
      <id>nexus</id>
      <name>Nexus Repository</name>
      <url>
        http://nexus.rfiserve.net/content/repositories/releases
      </url>
      <layout>default</layout>
    </repository>
    <snapshotRepository>
      <uniqueVersion>true</uniqueVersion>
      <id>nexus-snapshots</id>
      <name>Nexus Repository</name>
      <url>
        http://nexus.rfiserve.net/content/repositories/snapshots
      </url>
      <layout>default</layout>
    </snapshotRepository>
  </distributionManagement>
</project>
